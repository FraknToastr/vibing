<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>Josh Roberts' Data Toolbox</title>
  <style>
    :root{
      --bg:#08101a;
      --bgGlowA:rgba(31,111,235,.18);
      --bgGlowB:rgba(68,194,255,.14);
      --cardBg:rgba(255,255,255,.04);
      --panel:color-mix(in srgb, #101a29 90%, transparent);
      --searchBg:rgba(255,255,255,.04);
      --themeBg:#1a2432;
      --muted:#9aa4b2;
      --text:#e6edf3;
      --border:#223044;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --btn:#1f6feb;
      --btnText:#ffffff;
      --btn2:#263042;
      --btn2Text:#e6edf3;
      --chip:#1a2332;
      --chipText:#b9c4d3;
      --focus:#7aa7ff;
      --selectMenuBg:#0f172a;
      --selectMenuText:#f8fafc;
      --headerGlowA:rgba(31,111,235,.45);
      --headerGlowB:rgba(68,194,255,.30);
    }

    :root[data-theme="light"]{
      --bg:#f4f7fb;
      --bgGlowA:rgba(31,111,235,.10);
      --bgGlowB:rgba(68,194,255,.08);
      --cardBg:rgba(255,255,255,.86);
      --panel:color-mix(in srgb, #ffffff 90%, transparent);
      --searchBg:rgba(17,24,39,.02);
      --themeBg:#eef2f8;
      --muted:#4b5b6f;
      --text:#111827;
      --border:#d1dbe8;
      --shadow:0 10px 30px rgba(17,24,39,.10);
      --btn:#1f6feb;
      --btnText:#ffffff;
      --btn2:#eef2f8;
      --btn2Text:#111827;
      --chip:#eef2f8;
      --chipText:#334155;
      --focus:#2b6fff;
      --selectMenuBg:#ffffff;
      --selectMenuText:#111827;
      --headerGlowA:rgba(31,111,235,.24);
      --headerGlowB:rgba(68,194,255,.18);
    }

    *{ box-sizing:border-box; }
    html, body{
      margin:0;
      min-height:100%;
    }
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 10% 0%, var(--bgGlowA), transparent 55%),
                  radial-gradient(1000px 500px at 90% 10%, var(--bgGlowB), transparent 60%),
                  var(--bg);
      color:var(--text);
      min-height:100vh;
    }
    a{ color:inherit; }

    .topbar{
      position:sticky;
      top:0;
      z-index:20;
      border-bottom:1px solid var(--border);
      background:var(--panel);
      backdrop-filter: blur(8px);
      overflow:hidden;
    }

    .topbar::before{
      content:"";
      position:absolute;
      width:520px;
      height:220px;
      left:-120px;
      top:-120px;
      background:
        radial-gradient(circle, var(--headerGlowA), transparent 65%),
        radial-gradient(circle at 65% 55%, var(--headerGlowB), transparent 60%);
      filter: blur(10px);
      animation: drift 8s ease-in-out infinite alternate;
      pointer-events:none;
    }

    @keyframes drift{
      0%{ transform: translateX(0) translateY(0) scale(1); opacity:.85; }
      100%{ transform: translateX(60px) translateY(20px) scale(1.08); opacity:1; }
    }

    .barInner{
      width:min(1300px, 98vw);
      margin:0 auto;
      padding:12px;
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      position:relative;
    }

    .brand{
      min-width:0;
      display:flex;
      flex-direction:column;
      gap:4px;
    }

    .title{
      margin:0;
      font-size:1.02rem;
      letter-spacing:.2px;
      text-shadow: 0 0 14px rgba(122,167,255,.25);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .appName{
      margin:0;
      font-size:.84rem;
      color:var(--muted);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .topActions{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    .themeField{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:.84rem;
      color:var(--muted);
      background:var(--themeBg);
      border:1px solid var(--border);
      border-radius:10px;
      padding:7px 10px;
    }

    .themePicker{
      border:1px solid var(--border);
      border-radius:8px;
      background:var(--cardBg);
      color:var(--text);
      font-size:.82rem;
      padding:4px 8px;
      color-scheme: light dark;
    }

    .themePicker option{
      background:var(--selectMenuBg);
      color:var(--selectMenuText);
    }

    .themePicker:focus{
      outline:none;
      box-shadow:0 0 0 3px rgba(122,167,255,.18);
    }

    .wrap{
      width:min(1050px, 96vw);
      margin:0 auto;
      padding:22px 0 42px;
    }

    .launcherHead{
      display:flex;
      gap:14px;
      align-items:flex-end;
      justify-content:space-between;
      flex-wrap:wrap;
      padding:8px 2px 18px;
    }

    .sub{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.35;
      max-width:75ch;
    }

    .search{
      position:relative;
      flex:1 1 260px;
      max-width: 420px;
      min-width: 220px;
    }
    .search input{
      width:100%;
      padding:10px 12px 10px 36px;
      border-radius:12px;
      border:1px solid var(--border);
      background: var(--searchBg);
      color:var(--text);
      outline:none;
      box-shadow:none;
    }
    .search svg{
      position:absolute;
      left:11px; top:50%;
      transform:translateY(-50%);
      opacity:.8;
    }
    .search input:focus{
      border-color: var(--focus);
      box-shadow: 0 0 0 3px rgba(122,167,255,.18);
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap:14px;
      margin-top: 10px;
    }
    .card{
      grid-column: span 6;
      background: var(--cardBg);
      border:1px solid var(--border);
      border-radius:16px;
      padding:16px 16px 14px;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    @media (max-width: 780px){ .card{ grid-column: span 12; } }
    .cardTop{
      display:flex; gap:12px; align-items:flex-start;
      margin-bottom: 10px;
    }
    .icon{
      width:42px; height:42px;
      border-radius:14px;
      background: linear-gradient(135deg, rgba(31,111,235,.25), rgba(122,167,255,.10));
      border: 1px solid rgba(122,167,255,.25);
      display:flex; align-items:center; justify-content:center;
      font-size:20px;
      flex: 0 0 auto;
    }
    .nameRow{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .name{
      margin:0;
      font-size:16px;
      letter-spacing:.2px;
    }
    .meta{
      margin:6px 0 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.35;
    }
    .chips{ display:flex; flex-wrap:wrap; gap:8px; margin:12px 0 0; }
    .chip{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background: var(--chip);
      color: var(--chipText);
      border: 1px solid rgba(255,255,255,.06);
    }
    .actions{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top: 14px;
    }
    .btn{
      border:1px solid transparent;
      border-radius:12px;
      padding:10px 12px;
      font-weight:600;
      font-size:13px;
      cursor:pointer;
      text-decoration:none;
      display:inline-flex; align-items:center; gap:8px;
      user-select:none;
    }
    .btnPrimary{ background: var(--btn); color: var(--btnText); }
    .btnSecondary{ background: var(--btn2); color: var(--btn2Text); border-color: var(--border); }
    .btn:focus{
      outline:none;
      box-shadow: 0 0 0 3px rgba(122,167,255,.18);
    }
    .footer{
      margin-top: 18px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.4;
      padding: 0 2px;
    }
    .count{
      font-weight:700;
      color: var(--text);
    }
    .empty{
      grid-column: 1 / -1;
      border:1px dashed var(--border);
      border-radius:16px;
      padding:18px;
      color: var(--muted);
      background: rgba(255,255,255,.03);
    }

    @media (max-width:760px){
      .barInner{
        align-items:flex-start;
        flex-direction:column;
      }
      .topActions{
        width:100%;
        justify-content:flex-start;
      }
    }

    code{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace; }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="barInner">
      <div class="brand">
        <h1 class="title">Josh Roberts' Data Toolbox</h1>
        <p class="appName">Launcher</p>
      </div>
      <div class="topActions">
        <label class="themeField" for="themePicker">
          Theme
          <select id="themePicker" class="themePicker" aria-label="Theme picker">
            <option value="dark">Dark</option>
            <option value="light">Light</option>
          </select>
        </label>
      </div>
    </div>
  </header>

  <div class="wrap">
    <section class="launcherHead">
      <p class="sub">
        Static launcher for your GitHub-hosted tools. ‚ÄúLaunch‚Äù opens each app inside the shared toolbox shell; ‚ÄúSource‚Äù opens the repo file.
      </p>

      <div class="search" aria-label="Search apps">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M21 21l-4.3-4.3m1.8-5.2a7 7 0 11-14 0 7 7 0 0114 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <input id="q" type="text" placeholder="Search apps‚Ä¶" autocomplete="off" />
      </div>
    </section>

    <main>
      <div id="grid" class="grid" role="list"></div>
      <div class="footer">
        Showing <span id="shown" class="count">0</span> of <span id="total" class="count">0</span>.
        Tip: to add more apps, edit the <code>APPS</code> array in this file.
      </div>
    </main>
  </div>

  <script>
    const SHELL_CACHE_BUSTER = Date.now().toString(36);

    function pagesUrl(user, repo, path) {
      // GitHub Pages for project sites is typically:
      // https://<user>.github.io/<repo>/<path>
      // If your Pages config differs, just override launchUrl per app.
      const base = `https://${String(user).toLowerCase()}.github.io/${repo}`;
      if (!path) return base;
      return base.replace(/\/+$/, "") + "/" + String(path).replace(/^\/+/, "");
    }

    function shellUrl(targetUrl, appName) {
      const shell = new URL("app-shell.html", window.location.href);
      shell.searchParams.set("src", targetUrl);
      shell.searchParams.set("app", appName);
      shell.searchParams.set("_sv", SHELL_CACHE_BUSTER);
      return shell.toString();
    }

    const THEME_STORAGE_KEY = "jrDataToolboxTheme";

    function normalizeTheme(theme) {
      return theme === "light" ? "light" : "dark";
    }

    function setTheme(theme, persist = true) {
      const resolved = normalizeTheme(theme);
      document.documentElement.setAttribute("data-theme", resolved);
      if (elThemePicker.value !== resolved) {
        elThemePicker.value = resolved;
      }
      if (persist) {
        try {
          localStorage.setItem(THEME_STORAGE_KEY, resolved);
        } catch {
          // Ignore storage restrictions.
        }
      }
    }

    function initTheme() {
      let stored = "dark";
      try {
        stored = localStorage.getItem(THEME_STORAGE_KEY) || "dark";
      } catch {
        stored = "dark";
      }
      setTheme(stored, false);
    }

    const APPS = [
      {
        id: "pattern-extractor",
        name: "Pattern Extractor",
        icon: "üß©",
        description: "Extract regex-style patterns from text with configurable options.",
        tags: ["extract", "pattern", "regex", "vibing"],
        directUrl: "Pattern%20Extractor.html",
        launchUrl: shellUrl(
          "Pattern%20Extractor.html",
          "Pattern Extractor"
        ),
        sourceUrl: "https://github.com/FraknToastr/vibing/blob/main/Pattern%20Extractor.html"
      },
      {
        id: "sql-beautifier",
        name: "SQL Beautifier",
        icon: "üßº",
        description: "Format/beautify SQL quickly in-browser.",
        tags: ["sql", "format", "beautify", "vibing"],
        directUrl: "sql-beautifier.html",
        launchUrl: shellUrl(
          "sql-beautifier.html",
          "SQL Beautifier"
        ),
        sourceUrl: "https://github.com/FraknToastr/vibing/blob/main/sql-beautifier.html"
      },
      {
        id: "par-data-validator",
        name: "PAR Data Validator",
        icon: "‚úÖ",
        description: "Validate PAR data using the bundled PAR toolset.",
        tags: ["par", "validator", "data", "vibing"],
        directUrl: "PAR/index.html",
        launchUrl: shellUrl(
          "PAR/index.html",
          "PAR Data Validator"
        ),
        sourceUrl: "https://github.com/FraknToastr/PAR/blob/main/index.html"
      },
      {
        id: "iasa-qr-generator",
        name: "QR Generator with logo",
        icon: "üì∑",
        description: "QR code generator (Ileostomy Association).",
        tags: ["qr", "generator"],
        // Folder index: .../qr-generator/ (or .../qr-generator/index.html both usually work)
        directUrl: pagesUrl("FraknToastr", "Ileostomy-Association", "qr-generator/"),
        launchUrl: shellUrl(
          pagesUrl("FraknToastr", "Ileostomy-Association", "qr-generator/"),
          "QR Generator with logo"
        ),
        sourceUrl: "https://github.com/FraknToastr/Ileostomy-Association/blob/main/qr-generator/index.html"
      }
    ];

    const elGrid = document.getElementById("grid");
    const elQ = document.getElementById("q");
    const elThemePicker = document.getElementById("themePicker");
    const elShown = document.getElementById("shown");
    const elTotal = document.getElementById("total");

    elTotal.textContent = String(APPS.length);
    initTheme();

    function escapeHtml(s){
      return String(s)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function render(apps){
      elGrid.innerHTML = "";

      if (!apps.length){
        elGrid.innerHTML = `
          <div class="empty">
            No apps match your search.
          </div>
        `;
        elShown.textContent = "0";
        return;
      }

      const html = apps.map(app => {
        const tags = (app.tags || []).map(t => `<span class="chip">${escapeHtml(t)}</span>`).join("");
        return `
          <section class="card" role="listitem" aria-label="${escapeHtml(app.name)}">
            <div class="cardTop">
              <div class="icon" aria-hidden="true">${escapeHtml(app.icon || "üîó")}</div>
              <div style="flex:1 1 auto;">
                <div class="nameRow">
                  <h2 class="name">${escapeHtml(app.name)}</h2>
                </div>
                <p class="meta">${escapeHtml(app.description || "")}</p>
                <div class="chips">${tags}</div>
              </div>
            </div>

            <div class="actions">
              <a class="btn btnPrimary" href="${escapeHtml(app.launchUrl)}">
                ‚ñ∂ Launch
              </a>
              <a class="btn btnSecondary" href="${escapeHtml(app.directUrl || app.launchUrl)}" target="_blank" rel="noopener noreferrer">
                ‚ñ∂ Run Directly
              </a>
              <a class="btn btnSecondary" href="${escapeHtml(app.sourceUrl)}" target="_blank" rel="noopener noreferrer">
                üßæ Source
              </a>
            </div>
          </section>
        `;
      }).join("");

      elGrid.innerHTML = html;
      elShown.textContent = String(apps.length);
    }

    function applyFilter(){
      const q = elQ.value.trim().toLowerCase();
      if (!q){
        render(APPS);
        return;
      }
      const filtered = APPS.filter(a => {
        const hay = [
          a.name, a.description,
          ...(a.tags || []),
          a.id
        ].join(" ").toLowerCase();
        return hay.includes(q);
      });
      render(filtered);
    }

    elQ.addEventListener("input", applyFilter);
    elThemePicker.addEventListener("change", () => setTheme(elThemePicker.value));

    // Initial render
    render(APPS);
  </script>
</body>
</html>
